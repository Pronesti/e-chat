{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.cfa5a4c2f48d9b3350a7.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport openSocket from 'socket.io-client';\r\nimport './index.css';\r\n\r\nconst App = () => {\r\n  var socket = openSocket('http://localhost:3001/')\r\n  var newChat= [];\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n  const [chat, setChat] = useState([{msg:\"Hola\"},{msg:\"Todo Bien?\"}])\r\n\r\n  useEffect(() => {  \r\n    socket.on('new message', function(msg){\r\n      writeMessage(msg)\r\n     });\r\n  },[])\r\n\r\n  const writeMessage = (msg) => {\r\n   newChat = chat.concat(msg); \r\n   //newChat = [...chat, msg]; //this two takes inital State, but doesn not work with modified state \r\n   setChat(newChat);\r\n   //chat.push(msg); //this mutates :( and works, but does not re-render itself\r\n  }\r\n\r\n  const sendMessage = () => {\r\n    if(message === \"\"){\r\n      alert(\"Write something please\");\r\n    }else{\r\n      socket.emit('send message', message);\r\n      setMessage(\"\");\r\n    }\r\n    console.log(chat);\r\n}\r\n\r\n  return (\r\n    <div>\r\n    <ul id=\"messages\">{chat.map((msg, index) => <li key={index}>{msg.msg}</li>)}</ul>\r\n      <form>\r\n        <input id=\"m\" autoComplete=\"off\" value={message} onChange={(e) => setMessage(e.target.value)}/>\r\n        <button type=\"button\" onClick={sendMessage}>Send</button>\r\n      </form>\r\n      \r\n    </div>)\r\n}\r\n\r\nexport default App\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AAKA;AAAA;AAAA;AAAA;AALA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}